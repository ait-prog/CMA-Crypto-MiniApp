# üöÄ –î–µ–ø–ª–æ–π API –Ω–∞ Fly.io (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

Fly.io - –æ—Ç–ª–∏—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –¥–µ–ø–ª–æ—è Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

## –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Fly CLI

### Windows (PowerShell):

```powershell
iwr https://fly.io/install.ps1 -useb | iex
```

### –ò–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å:
https://fly.io/docs/hands-on/install-flyctl/

## –®–∞–≥ 2: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

```bash
fly auth signup
```

–ò–ª–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://fly.io
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ GitHub

## –®–∞–≥ 3: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```bash
fly auth login
```

## –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É `api`:
   ```bash
   cd api
   ```

2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
   ```bash
   fly launch
   ```

3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
   - **App name**: `crypto-api` (–∏–ª–∏ –ª—é–±–æ–µ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –∏–º—è)
   - **Region**: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: `iad` –¥–ª—è –í–∞—à–∏–Ω–≥—Ç–æ–Ω–∞)
   - **Postgres**: No (–Ω–µ –Ω—É–∂–µ–Ω)
   - **Redis**: No (–Ω–µ –Ω—É–∂–µ–Ω)

## –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
fly secrets set CRYPTOPANIC_KEY=ecef6293b2242fb90b6e03175ecb5a4a2e3a3b01
```

(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```bash
fly secrets set LLM4WEB3_URL=your_url
fly secrets set LLM4WEB3_TOKEN=your_token
```

## –®–∞–≥ 6: –î–µ–ø–ª–æ–π

```bash
fly deploy
```

## –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
fly status
fly logs
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API

```bash
curl https://crypto-api.fly.dev/healthz
curl https://crypto-api.fly.dev/coins
```

## –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://crypto-api.fly.dev`)
2. –û–±–Ω–æ–≤–∏—Ç–µ GitHub Secrets:
   - GitHub ‚Üí Settings ‚Üí Secrets ‚Üí Actions
   - –î–æ–±–∞–≤—å—Ç–µ: `VITE_API` = –≤–∞—à Fly.io URL
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Fly.io

- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ (3 shared-cpu VMs)
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π
- ‚úÖ Docker-based
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å–µ—Ç—å

## Troubleshooting

### –û—à–∏–±–∫–∞: "Port binding"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Dockerfile –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `EXPOSE 8080`
- Fly.io –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –ø–æ—Ä—Ç

### –û—à–∏–±–∫–∞: "Module not found"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Dockerfile
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ requirements.txt

